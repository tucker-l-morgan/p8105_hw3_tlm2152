P8105 - Homework 3
================
Tucker Morgan (tlm2152)
10/13/2021

``` r
library(tidyverse)
library(viridis)
```

## Problem 1

I’ll start by loading in the `instacart` dataset.

``` r
library(p8105.datasets)
data("instacart")
head(instacart)
```

    ## # A tibble: 6 × 15
    ##   order_id product_id add_to_cart_order reordered user_id eval_set order_number
    ##      <int>      <int>             <int>     <int>   <int> <chr>           <int>
    ## 1        1      49302                 1         1  112108 train               4
    ## 2        1      11109                 2         1  112108 train               4
    ## 3        1      10246                 3         0  112108 train               4
    ## 4        1      49683                 4         0  112108 train               4
    ## 5        1      43633                 5         1  112108 train               4
    ## 6        1      13176                 6         0  112108 train               4
    ## # … with 8 more variables: order_dow <int>, order_hour_of_day <int>,
    ## #   days_since_prior_order <int>, product_name <chr>, aisle_id <int>,
    ## #   department_id <int>, aisle <chr>, department <chr>

There are a total of 1384617 observations in the dataset and 15
variables. These data are arranged in a `tibble` and describe shopping
information including `order_id`, `product_id`, `product name`, and
`aisle`. For instance, for `order_id = 1`, the customer ordered
Bulgarian Yogurt from the yoghurt aisle, Organic Celery Hearts from
fresh vegetables, and Grated Pecorino Romano Cheese from the specialty
cheeses section among other items.

``` r
count(distinct(instacart, aisle_id))
```

    ## # A tibble: 1 × 1
    ##       n
    ##   <int>
    ## 1   134

``` r
instacart %>% 
  group_by(aisle) %>% 
  summarize(n_purch = n()) %>% 
  arrange(desc(n_purch))
```

    ## # A tibble: 134 × 2
    ##    aisle                         n_purch
    ##    <chr>                           <int>
    ##  1 fresh vegetables               150609
    ##  2 fresh fruits                   150473
    ##  3 packaged vegetables fruits      78493
    ##  4 yogurt                          55240
    ##  5 packaged cheese                 41699
    ##  6 water seltzer sparkling water   36617
    ##  7 milk                            32644
    ##  8 chips pretzels                  31269
    ##  9 soy lactosefree                 26240
    ## 10 bread                           23635
    ## # … with 124 more rows

There are a total of 134 unique aisles. The aisles ordered from most
frequently are `fresh vegetables`, `fresh fruits`, and
`packaged vegetables fruits`. This is somewhat comforting.

``` r
instacart %>% 
  group_by(aisle) %>% 
  summarize(n_purch = n()) %>% 
  filter(n_purch >= 10000) %>% 
  arrange(n_purch) %>% 
  mutate(aisle = factor(aisle, levels = aisle[order(n_purch, decreasing = TRUE)])) %>% 
  ggplot(aes(x = aisle, y = n_purch, fill = aisle)) +
  geom_bar(stat = "identity", alpha = 0.9) +
  theme(legend.position = "none",
        axis.text.x = element_text(angle = -90, vjust = .35, hjust = 0)) +
  scale_fill_viridis_d() +
  labs(x = "Aisle Name", y = "Number of Purchases", title = "Number of Instacart Purchases by Aisle")
```

![](p8105_hw3_tlm2152_files/figure-gfm/aisle%20plot-1.png)<!-- -->
